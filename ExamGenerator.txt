1. FRONTEND UI (Student View)

You only need four inputs:

1. Course (dropdown)

Comes directly from your database

Filters examTypes automatically

2. Exam Types (multi-select dropdown)

Examples:

Quiz 1

Quiz 2

Midterm

Final

Practice Set

Allow selecting multiple:

Quiz 1 + Quiz 2

Midterm + Final

Quiz 2 + Final
etc.

3. Total Marks (simple number input)

Student enters:

5 marks

10 marks

20 marks
Anything.

4. Question Type (optional)

MCQ

Essay

Mixed
Default = Mixed

5. Button: “Generate Exam”

Opens the AI sidebar and sends the request.

2. BACKEND LOGIC

When the frontend hits /api/generate-exam, you do:

Step 1: Fetch the course
const course = await Course.findById(courseId)

Step 2: Extract major from tags
const major = course.tags[0] // e.g. “Software Engineering”

Step 3: Get all questions from DB
const questions = await Question.find({
  courseId,
  examType: { $in: selectedExamTypes }
})

Step 4: Prepare a super tight TOON payload

This reduces your token bill and stabilizes output.

#TOON
(task:generate_exam;
major:Software_Engineering;
course:Calculus_I;
examTypes:[Quiz_1,Quiz_2];
totalMarks:7;
preferredTypes:[MCQ,Essay])

Step 5: Append compressed question bank

Example:

#QUESTION_BANK
1. (type:MCQ;marks:1;question:"What is...")
2. (type:Essay;marks:5;question:"Explain...")
3. (type:MCQ;marks:2;question:"Find the derivative...")

Step 6: Tell Gemini what you want
#INSTRUCTIONS
Select questions from QUESTION_BANK.
Total marks must equal 7.
Mix MCQ and Essay unless restricted.
Output cleanly formatted exam only.

Step 7: Gemini returns a perfect exam

Numbered

Clean

Balanced marks

Mixed types

Ready to download as PDF or copy

3. AI SIDEBAR EXPERIENCE (Cursor-style)

When the student presses Generate Exam:

Sidebar opens

Shows “Generating your exam…”

Once done, AI outputs:

Exam with headings

Marks per question

Total marks = required sum

Then student can refine:

“Regenerate with easier questions”

“Replace Q3”

“Give only MCQs”

“Make it 12 marks instead of 7”